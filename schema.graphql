# ======================
# TYPES
# ======================

type User {
  id: ID!
  name: String!
  email: String!
  role: String! # "member" | "lead" | "admin"
  createdAt: String!
  updatedAt: String!
}

type Team {
  id: ID!
  name: String!
  description: String
  members: [User!]!
  createdAt: String!
  updatedAt: String!
}

type Task {
  id: ID!
  title: String!
  description: String
  status: String! # "todo" | "in-progress" | "done"
  priority: String! # "low" | "medium" | "high"
  assignedTo: User!
  team: Team!
  dueDate: String
  createdAt: String!
  updatedAt: String!
}

# ======================
# INPUTS
# ======================

input LoginInput {
  email: String!
  password: String!
}

input SignupInput {
  name: String!
  email: String!
  password: String!
}

input CreateTeamInput {
  name: String!
  description: String
  memberIds: [ID!]! # list of user IDs
}

input CreateTaskInput {
  title: String!
  description: String
  status: String
  priority: String
  assignedToId: ID!
  teamId: ID!
  dueDate: String
}

input UpdateTaskInput {
  id: ID!
  title: String
  description: String
  status: String
  priority: String
  assignedToId: ID
  dueDate: String
}

# ======================
# PAYLOADS
# ======================

type AuthPayload {
  token: String!
  user: User!
}

type TeamPayload {
  team: Team!
}

type TaskPayload {
  task: Task!
}

# ======================
# QUERIES & MUTATIONS
# ======================

type Query {
  me: User
  getUser(id: ID!): User
  getTeam(id: ID!): Team
  getTask(id: ID!): Task
  getTasks(teamId: ID!): [Task!]!
  getTeams: [Team!]!
}

type Mutation {
  # Auth
  login(input: LoginInput!): AuthPayload!
  signup(input: SignupInput!): AuthPayload!

  # Teams
  createTeam(input: CreateTeamInput!): TeamPayload!

  # Tasks
  createTask(input: CreateTaskInput!): TaskPayload!
  updateTask(input: UpdateTaskInput!): TaskPayload!
  deleteTask(id: ID!): Boolean!
}